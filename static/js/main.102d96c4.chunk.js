(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{29:function(e,t,a){e.exports=a.p+"static/media/github.ccadf543.png"},30:function(e,t,a){e.exports=a.p+"static/media/linkedin.5bb3ed2b.png"},33:function(e,t,a){e.exports=a(51)},43:function(e,t,a){},44:function(e,t,a){},46:function(e,t){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),c=a(13),s=a(20),i=a.n(s),u=(a(43),a(2)),l=(a(44),a(3)),p=a(4),m=a(6),d=a(5),f=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("h1",{"data-testid":"settings-title"},"Configura\xe7\xe3o")}}]),a}(n.Component),h=a(16),v=a(21),g=a.n(v),b=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).msgFeedback=function(){e.props.acertos<3?e.setState({msg:"Could be better..."}):e.setState({msg:"Well Done!"})},e.saveStorage=function(t,a){var n=[],r={name:t,score:a,picture:e.convertEmail()};JSON.parse(localStorage.getItem("ranking"))||(console.log("diferente"),n.push(r),localStorage.setItem("ranking",JSON.stringify(n)))},e.state={msg:""},e.convertEmail=e.convertEmail.bind(Object(h.a)(e)),e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.msgFeedback(),this.saveStorage()}},{key:"convertEmail",value:function(){var e=this.props.email,t=g()(e).toString();return"https://www.gravatar.com/avatar/".concat(t)}},{key:"render",value:function(){var e=this.props,t=e.nome,a=e.pontuacao,n=e.acertos,o=this.state.msg;return this.saveStorage(t,a),r.a.createElement("header",{className:"ranking"},r.a.createElement("h2",null,"Results"),r.a.createElement("div",null,r.a.createElement("img",{"data-testid":"header-profile-picture",src:this.convertEmail(),alt:t}),r.a.createElement("span",{"data-testid":"header-player-name"},t)),r.a.createElement("h3",{"data-testid":"header-score"},"Points",r.a.createElement("b",null,a)),r.a.createElement("h3",{"data-testid":"feedback-total-question"},"Hits",r.a.createElement("b",null,n)),r.a.createElement("h2",{"data-testid":"feedback-text"},o),r.a.createElement("div",{className:"links"},r.a.createElement(c.b,{to:"/","data-testid":"btn-play-again"},"Play Again")))}}]),a}(n.Component),E=Object(o.b)((function(e){return{acertos:e.player.assertions,nome:e.player.name,email:e.player.gravatarEmail,pontuacao:e.player.score}}))(b),y=a(29),O=a.n(y),k=a(30),j=a.n(k),w=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("footer",null,r.a.createElement("p",null,"Desenvolvido por",r.a.createElement("b",null,"F\xe1bio Augusto Mazuchi")),r.a.createElement("div",{className:"links"},r.a.createElement(c.b,{target:"_blank",to:"https://github.com/FabioMazuchi"},r.a.createElement("img",{src:O.a,alt:"link para github"})),r.a.createElement(c.b,{target:"_blank",to:"https://www.linkedin.com/in/fabio-augusto-mazuchi/"},r.a.createElement("img",{src:j.a,alt:"link para linkedin"})),r.a.createElement("h4",null,"mazuchi.augusto@hotmail.com")))}}]),a}(n.Component),x=a(8),S=a.n(x),N=a(15),T={respostas:[],timeLeft:30,timeOver:!1,indice:0,dificuldade:"",pontuacao:0,acertou:!1,errou:!1,mostrarBotaoNext:!1,proximaPergunta:0,showFeedback:!1,total:0};function _(e){return{type:"GET_PERGUNTAS",payload:e}}function P(e){return{type:"GET_TOKEN",payload:e}}function R(e){return function(){var t=Object(N.a)(S.a.mark((function t(a){var n,r,o,c,s,i;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"REQUEST_PERGUNTAS"}),t.next=3,fetch("https://opentdb.com/api.php?amount=5&token=".concat(e));case 3:return n=t.sent,t.next=6,n.json();case 6:if(3!==(r=t.sent).response_code){t.next=23;break}return t.next=10,fetch("https://opentdb.com/api_token.php?command=request");case 10:return o=t.sent,t.next=13,o.json();case 13:return c=t.sent,t.next=16,fetch("https://opentdb.com/api.php?amount=5&token=".concat(c.token));case 16:return s=t.sent,t.next=19,s.json();case 19:i=t.sent,a(_(i)),t.next=24;break;case 23:a(_(r));case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var C=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={url:""},e.convertEmail=e.convertEmail.bind(Object(h.a)(e)),e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.convertEmail()}},{key:"convertEmail",value:function(){var e=this.props.email,t=g()(e).toString(),a="https://www.gravatar.com/avatar/".concat(t);this.setState({url:a})}},{key:"render",value:function(){var e=this.props,t=e.nome,a=e.pontuacao,n=this.state.url;return r.a.createElement("header",null,r.a.createElement("div",null,r.a.createElement("img",{"data-testid":"header-profile-picture",src:n,alt:t}),r.a.createElement("span",{"data-testid":"header-player-name"},t)),r.a.createElement("span",{className:"score","data-testid":"header-score"},"Score:",a))}}]),a}(n.Component),A=Object(o.b)((function(e){return{nome:e.player.name,email:e.player.gravatarEmail,pontuacao:e.player.score}}))(C),F=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.respostas,a=e.timeOver,n=e.acerto,o=e.setRespTrue,c=e.erro,s=e.setRespFalse;return r.a.createElement("ul",{"data-testid":"answer-options"},t.map((function(e,t){var i=Object.keys(e),u=Object.values(e);return"correct_answer"===i[0]?r.a.createElement("button",{className:n(),onClick:o,key:t,type:"button","data-testid":"correct-answer",disabled:a},u[0].replace(/&quot/g,"").replace(/&#039/g,"").replace(/&eacute;/g).replace(/;/g,"")):r.a.createElement("button",{className:c(),onClick:s,key:t,type:"button","data-testid":"wrong-answer-".concat(u[1]),disabled:a},u[0].replace(/&quot/g,"").replace(/&#039/g,"").replace(/&eacute;/g).replace(/;/g,""))})))}}]),a}(n.Component),I=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).setRespTrue=function(){var t=e.state,a=t.dificuldade;var n=10+t.timeLeft*("medium"===a?2:3);e.setState({acertou:!0,errou:!1,pontuacao:n,mostrarBotaoNext:!0})},e.setRespFalse=function(){e.setState({acertou:!1,errou:!0,mostrarBotaoNext:!0})},e.buscarPerguntas=Object(N.a)(S.a.mark((function t(){var a,n,r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.token,r=a.getPerguntas,localStorage.setItem("token",JSON.stringify(n)),t.next=4,r(n);case 4:case"end":return t.stop()}}),t)}))),e.defineDificuldade=function(){var t=e.state.indice,a=e.props.perguntas;e.setState({dificuldade:a[t].difficulty})},e.arrayTrueFalse=function(t){var a=e.props.perguntas,n=[],r=[0,1],o=[0,1];n.push({correct_answer:a[t].correct_answer}),a[t].incorrect_answers.forEach((function(e,t){n.push({incorrect_answers:e,pos:t})})),o=o.sort((function(){return Math.random()-.5})),n.forEach((function(e,t){r.splice([o[t]],1,e)})),e.setState({respostas:r})},e.arrayRespostas=function(t){var a=e.props.perguntas;if("multiple"!==a[t].type)e.arrayTrueFalse(t);else{var n=[],r=[0,1,2,3],o=[0,1,2,3];n.push({correct_answer:a[t].correct_answer}),a[t].incorrect_answers.forEach((function(e,t){n.push({incorrect_answers:e,pos:t})})),o=o.sort((function(){return Math.random()-.5})),n.forEach((function(e,t){r.splice([o[t]],1,e)})),e.setState({respostas:r})}},e.timerFunction=function(){e.myInterval=setInterval((function(){var t=e.state.timeLeft;t>0&&e.setState((function(e){return{timeLeft:e.timeLeft-1}})),0===t&&(clearInterval(e.myInterval),e.setState({timeOver:!0}))}),1e3)},e.correctAnswer=function(){var t=e.state,a=t.difficulty;var n=10+t.timeLeft*("medium"===a?2:3);e.setState((function(e){return{pontuacao:e.pontuacao+n}}))},e.adicionaClasseAcerto=function(){var t=e.state,a=t.acertou,n=t.errou;if(a||n)return"acertou"},e.adicionaClasseErro=function(){var t=e.state,a=t.acertou,n=t.errou;if(a||n)return"errou"},e.nextQuestion=function(){var t=e.state.proximaPergunta;e.setState((function(e){return{proximaPergunta:e.proximaPergunta+1,errou:!1,acertou:!1,mostrarBotaoNext:!1,timeLeft:30}}),(function(){return e.arrayRespostas(t)}))},e.exibirFeedback=function(){e.props.history.push("/feed")},e.state=T,e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(N.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.proximaPergunta,e.next=3,this.buscarPerguntas();case 3:this.arrayRespostas(t),this.timerFunction(),this.defineDificuldade();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){var a=this.props.updatePontuacao,n=this.state.pontuacao;n!==t.pontuacao&&a(n),5===t.proximaPergunta&&this.exibirFeedback()}},{key:"render",value:function(){var e=this.props.perguntas,t=this.state,a=t.respostas,n=t.timeLeft,o=t.timeOver,c=this.state,s=c.mostrarBotaoNext,i=c.proximaPergunta;return e?r.a.createElement("section",null,r.a.createElement(A,null),r.a.createElement("div",{className:"jogo"},r.a.createElement("section",null,5!==i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"topo"},r.a.createElement("span",null,n),r.a.createElement("h3",{"data-testid":"question-category"},e[i].category)),r.a.createElement("p",{"data-testid":"question-text"},e[i].question.replace(/&quot/g,"").replace(/&#039/g,"").replace(/&eacute;/g).replace(/;/g,"")),r.a.createElement(F,{respostas:a,timeOver:o,acerto:this.adicionaClasseAcerto,setRespTrue:this.setRespTrue,erro:this.adicionaClasseErro,setRespFalse:this.setRespFalse}),s&&r.a.createElement("button",{className:"next","data-testid":"btn-next",type:"button",onClick:this.nextQuestion},"Next"))))):r.a.createElement("h2",null,"Loading...")}}]),a}(n.Component),U=Object(o.b)((function(e){return{token:e.token,perguntas:e.perguntas.response.results}}),(function(e){return{getPerguntas:function(t){return e(R(t))},updatePontuacao:function(t){return e({type:"UPDATE_POINTS",payload:t})}}}))(I),D=a(22),L=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(D.a)({},n,r))},e.loginVerifiyer=function(){var t=e.state,a=t.email,n=t.name,r=a.includes("@"),o=a.includes(".com"),c=n.length>=3;return!(r&&o&&c)},e.state={name:"",email:""},e.logar=e.logar.bind(Object(h.a)(e)),e}return Object(p.a)(a,[{key:"componentWillUnmount",value:function(){var e=this.props.zerarAcertos;this.buscarPerguntas(),e()}},{key:"buscarPerguntas",value:function(){var e=Object(N.a)(S.a.mark((function e(){var t,a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.token,n=t.getPerguntas,localStorage.setItem("token",JSON.stringify(a)),e.next=4,n(a);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logar",value:function(){var e=Object(N.a)(S.a.mark((function e(){var t,a,n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.getToken,n=t.history,r=t.getEmailName,e.next=3,a();case 3:r(this.state),n.push("/jogo");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.name,a=e.email;return r.a.createElement("section",{className:"App-header"},r.a.createElement("h1",{className:"App-logo"},"Quizz",r.a.createElement("span",null,"?")),r.a.createElement("form",null,r.a.createElement("input",{type:"text",name:"name",value:t,"data-testid":"input-player-name",placeholder:"Nome",onChange:this.handleChange}),r.a.createElement("input",{type:"email",name:"email",value:a,"data-testid":"input-gravatar-email",placeholder:"Email",onChange:this.handleChange}),r.a.createElement("button",{type:"button",disabled:this.loginVerifiyer(),"data-testid":"btn-play",onClick:this.logar},"Play!")))}}]),a}(n.Component),M=Object(o.b)((function(e){return{token:e.token.token}}),(function(e){return{getToken:function(){return e(function(){var e=Object(N.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"REQUEST_TOKEN"}),e.next=3,fetch("https://opentdb.com/api_token.php?command=request");case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,t(P(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getEmailName:function(t){return e(function(e){return{type:"GET_EMAIL_NOME",payload:e}}(t))},getPerguntas:function(t){return e(R(t))},zerarAcertos:function(){return e({type:"ZERA_ACERTOS"})}}}))(L),G=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),r.a.createElement(c.b,{className:"config","data-testid":"btn-go-home",to:"/"},"Home"))}}]),a}(n.Component);function q(){return r.a.createElement("div",{className:"App"},r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/jogo",component:U}),r.a.createElement(u.a,{path:"/feed",component:E}),r.a.createElement(u.a,{path:"/ranking",component:G}),r.a.createElement(u.a,{path:"/config",component:f}),r.a.createElement(u.a,{path:"/",component:M})),r.a.createElement(w,null))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=a(18),z=a(32),B=a(31),J=a(7),W={name:"",assertions:0,score:0,gravatarEmail:""},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_EMAIL_NOME":return Object(J.a)(Object(J.a)({},e),{},{name:t.payload.name,gravatarEmail:t.payload.email});case"UPDATE_POINTS":return Object(J.a)(Object(J.a)({},e),{},{score:t.payload,assertions:e.assertions+1});case"ZERA_ACERTOS":return Object(J.a)(Object(J.a)({},e),{},{assertions:0});default:return e}},H={token:""},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_TOKEN":return Object(J.a)({},e);case"GET_TOKEN":return t.payload.token;case"FAILED_REQUEST":return Object(J.a)({},e);default:return e}},Z={response:{}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_PERGUNTAS":return Object(J.a)({},e);case"GET_PERGUNTAS":case"FAILED_REQUEST":return Object(J.a)(Object(J.a)({},e),{},{response:t.payload});default:return e}},X=(0,a(18).combineReducers)({player:K,token:V,perguntas:$}),Y=Object(Q.createStore)(X,Object(B.composeWithDevTools)(Object(Q.applyMiddleware)(z.a)));window.Cypress&&(window.store=Y);var ee=Y;i.a.render(r.a.createElement(c.a,null,r.a.createElement(o.a,{store:ee},r.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.102d96c4.chunk.js.map